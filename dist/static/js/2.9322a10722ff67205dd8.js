webpackJsonp([2],{"3cXf":function(e,t,s){e.exports={default:s("4rP4"),__esModule:!0}},"3u2N":function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=s("4YfN"),a=r(o),i=s("3cXf"),n=r(i),c=s("HVJf");t.default={components:{},data:function(){return{selectedGrade:"二年级",selectedType:1,gradeList:[{name:"一年级"},{name:"二年级"},{name:"三年级"},{name:"四年级"},{name:"五年级"},{name:"六年级"},{name:"七年级"},{name:"八年级"},{name:"九年级"}],classTypes:[{name:"本校课程"},{name:"第三方课程"}],searchFilter:{area:"小学",grade:1},courseList:[],selectedCourseList:[],selectedCourse:{}}},props:{},beforeCreate:function(){},created:function(){},mounted:function(){this.loadCourse()},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{selecteGrade:function(e){this.selectedGrade=e.name},selecteType:function(e){this.selectedType=e.name},selectSingleCourse:function(e,t){var s=this;t.stopPropagation(),s.selectedCourse=JSON.parse((0,n.default)(e))},selectCourse:function(e,t){var s=this;t.stopPropagation(),s.selectedCourseList.indexOf(e.id)<=-1?s.selectedCourseList.push(e.id):s.selectedCourseList.splice(s.selectedCourseList.indexOf(e.id),1)},importCourse:function(){var e=this;vueBus.$emit("importCourseSelected",e.selectedCourse),e.selectCourse={},e.stateObj.courseImportDialogVisible=!1},loadCourse:function(){var e=this;e.loading=!0,e.$axios.post(e.requestUrl.queryCourseTemplateByFilter,e.searchFilter).then(function(t){e.courseList=t.data,e.loading=!1}).catch(function(t){e.loading=!1,console.log("loadCourse:"+t)})}},computed:(0,a.default)({},(0,c.mapState)(["stateObj","requestUrl"])),watch:{},filter:{}}},"4rP4":function(e,t,s){var r=s("UusJ"),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},CLwS:function(e,t,s){var r=s("NUpW"),o=s("OtAM");s("Mx9c")("keys",function(){return function(e){return o(r(e))}})},Mx9c:function(e,t,s){var r=s("MITN"),o=s("UusJ"),a=s("xVzf");e.exports=function(e,t){var s=(o.Object||{})[e]||Object[e],i={};i[e]=t(s),r(r.S+r.F*a(function(){s(1)}),"Object",i)}},"N0+X":function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.stateObj.scCourseImportDialogVisible?s("div",[s("el-dialog",{staticClass:"eca-dialog-header addCourse-dialog",attrs:{title:e.courseFormDialogTitle,visible:e.stateObj.scCourseImportDialogVisible,width:"1152px"},on:{open:e.onCourseFormDialogOpen,"update:visible":function(t){e.$set(e.stateObj,"scCourseImportDialogVisible",t)}}},[s("div",{staticClass:"dialog-body f-clear addCourse-dialog-body"},[s("div",{staticClass:"add-course-left f-l h-p-100"},[e._l([e.courseForm],function(t){return s("div",{staticClass:"class-item class-item-addCourseDialog mg-center"},[s("div",{staticClass:"class-cover",style:{backgroundImage:"url("+e.courseForm.coverImg+")"}}),e._v(" "),s("div",{staticClass:"course-info-detail-ct"},[s("div",{staticClass:"p-h-5"},[s("div",{staticClass:"class-name"},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"class-property"},[s("div",[s("span",{staticClass:"pro-level"},[e._v(e._s(t.degreeOfDifficulty||"初级"))]),e._v(" "),s("span",{staticClass:"ml-10"},[e._v("学时："+e._s(t.numberOfLessons))]),e._v(" "),s("span",{staticClass:"ml-10"},[e._v("学位："+e._s(t.maxNumberOfStudents))])]),e._v(" "),s("div",[t.lessonDays.length>0?s("span",{},[e._v(e._s(e._f("dayTransform")(t.lessonDays[0])))]):e._e(),e._v(" "),s("span",{staticClass:"ml-10"},[e._v("16:00-17:00")])]),e._v(" "),s("div",[s("span",[e._v("授课教师："+e._s(t.courseTeacher.realName))])])]),e._v(" "),s("div",{staticClass:"h-40 f-s-20"},[s("div",{staticClass:"f-l f-w-b"},[s("span",{staticClass:"scCourse-course-price"},[e._v("¥"+e._s(t.courseFee))])])])])])])}),e._v(" "),s("div",{staticClass:"add-item-car course-entering-add mt-15 f-s-16 hidden"},[s("i",{staticClass:"fa fa-plus"})])],2),e._v(" "),s("div",{staticClass:"add-course-right f-r h-p-100"},[s("div",{staticClass:"tag-switch-bar height-50"},[s("span",{staticClass:"tag-selected",on:{click:function(t){e.switchEnteringFormPart("courseContent")}}},[e._v("课程内容")]),e._v(" "),s("span",{on:{click:function(t){e.switchEnteringFormPart("courseSection")}}},[e._v("课程章节")]),e._v(" "),s("span",{on:{click:function(t){e.switchEnteringFormPart("courseInstructor")}}},[e._v("任课老师")]),e._v(" "),s("span",{on:{click:function(t){e.switchEnteringFormPart("courseFee")}}},[e._v("课程费用")])]),e._v(" "),s("div",{staticClass:"course-entering-form p-l-15"},[s("el-form",{ref:"courseForm",staticClass:"demo-courseForm",attrs:{model:e.courseForm,rules:e.rules,inline:!0,size:"medium","label-width":"100px","label-position":"top"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"courseFee"==e.courseEnteringFormPart,expression:"courseEnteringFormPart=='courseFee'"}]},[s("el-form-item",{attrs:{label:"课时",prop:"numberOfLessons"}},[s("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.courseForm.numberOfLessons,callback:function(t){e.$set(e.courseForm,"numberOfLessons",t)},expression:"courseForm.numberOfLessons"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{attrs:{label:"预支教务费用",prop:"advancePayment"}},[s("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.courseForm.advancePayment,callback:function(t){e.$set(e.courseForm,"advancePayment",t)},expression:"courseForm.advancePayment"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{attrs:{label:"课程学费",prop:"courseFee"}},[s("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.courseForm.courseFee,callback:function(t){e.$set(e.courseForm,"courseFee",t)},expression:"courseForm.courseFee"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{attrs:{label:"其它费用",prop:"extraFee"}},[s("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.courseForm.extraFee,callback:function(t){e.$set(e.courseForm,"extraFee",t)},expression:"courseForm.extraFee"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"其他费用备注",prop:"extraFeeExplain"}},[s("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.courseForm.extraFeeExplain,callback:function(t){e.$set(e.courseForm,"extraFeeExplain",t)},expression:"courseForm.extraFeeExplain"}})],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"courseContent"==e.courseEnteringFormPart,expression:"courseEnteringFormPart=='courseContent'"}]},[s("el-form-item",{attrs:{label:"课程名称",prop:"name"}},[s("el-input",{attrs:{placeholder:"请输入课程名称"},model:{value:e.courseForm.name,callback:function(t){e.$set(e.courseForm,"name",t)},expression:"courseForm.name"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{attrs:{label:"学段",prop:"area"}},[s("div",[s("el-radio-group",{model:{value:e.courseForm.area,callback:function(t){e.$set(e.courseForm,"area",t)},expression:"courseForm.area"}},e._l(e.eduStageList,function(e){return s("el-radio-button",{attrs:{label:e}})}))],1)]),e._v(" "),s("br"),e._v(" "),s("el-form-item",{attrs:{label:"年级",prop:"grades"}},[s("div",[s("el-checkbox-group",{model:{value:e.courseForm.grades,callback:function(t){e.$set(e.courseForm,"grades",t)},expression:"courseForm.grades"}},e._l(e.gradeList(e.courseForm.area),function(t){return s("el-checkbox-button",{attrs:{label:t.value}},[e._v(e._s(t.name))])}))],1)]),e._v(" "),s("br"),e._v(" "),s("el-form-item",{attrs:{label:"难度",prop:"degreeOfDifficulty"}},[s("div",[s("el-radio-group",{model:{value:e.courseForm.degreeOfDifficulty,callback:function(t){e.$set(e.courseForm,"degreeOfDifficulty",t)},expression:"courseForm.degreeOfDifficulty"}},e._l(e.levelList,function(e){return s("el-radio-button",{attrs:{label:e}})}))],1)]),e._v(" "),s("el-form-item",{staticStyle:{width:"132px"},attrs:{label:"课时",prop:"numberOfLessons"}},[s("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.courseForm.numberOfLessons,callback:function(t){e.$set(e.courseForm,"numberOfLessons",t)},expression:"courseForm.numberOfLessons"}})],1),e._v(" "),s("el-form-item",{staticStyle:{width:"132px"},attrs:{label:"学位",prop:"maxNumberOfStudents"}},[s("el-input-number",{attrs:{min:1,"controls-position":"right"},model:{value:e.courseForm.maxNumberOfStudents,callback:function(t){e.$set(e.courseForm,"maxNumberOfStudents",t)},expression:"courseForm.maxNumberOfStudents"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{attrs:{label:"开始时间",prop:"lessonBeginTime"}},[s("div",[s("el-time-picker",{attrs:{align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",placeholder:"选择开始时间"},model:{value:e.courseForm.lessonBeginTime,callback:function(t){e.$set(e.courseForm,"lessonBeginTime",t)},expression:"courseForm.lessonBeginTime"}})],1)]),e._v(" "),s("el-form-item",{attrs:{label:"结束时间",prop:"lessonEndTime"}},[s("div",[s("el-time-picker",{attrs:{align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",placeholder:"选择结束时间"},model:{value:e.courseForm.lessonEndTime,callback:function(t){e.$set(e.courseForm,"lessonEndTime",t)},expression:"courseForm.lessonEndTime"}})],1)]),e._v(" "),s("br"),e._v(" "),s("el-form-item",{attrs:{label:"时间",prop:"lessonDays"}},[s("div",[s("el-checkbox-group",{model:{value:e.courseForm.lessonDays,callback:function(t){e.$set(e.courseForm,"lessonDays",t)},expression:"courseForm.lessonDays"}},e._l(e.dayList,function(t){return s("el-checkbox-button",{attrs:{label:t.value}},[e._v(e._s(t.name))])}))],1)]),e._v(" "),s("br"),e._v(" "),s("el-form-item",{attrs:{label:"上课地点",prop:"name"}},[s("el-input",{attrs:{placeholder:"请输上课地点"},model:{value:e.courseForm.lessonLocation,callback:function(t){e.$set(e.courseForm,"lessonLocation",t)},expression:"courseForm.lessonLocation"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"课程简介",prop:"introduction"}},[s("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.courseForm.introduction,callback:function(t){e.$set(e.courseForm,"introduction",t)},expression:"courseForm.introduction"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{attrs:{label:"封面",prop:"coverImg"}},[s("div",[s("el-upload",{ref:"coverImg",attrs:{action:e.requestUrl.fileUpload,data:{url:e.courseForm.coverImg,property:"coverImg"},"file-list":e.getFileList([e.courseForm.coverImg],"coverImg","string"),"list-type":"picture-card","http-request":e.uploadCover,"before-remove":e.handleBeforeRemove(e.courseForm.coverImg),"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[s("i",{staticClass:"el-icon-plus"})]),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("img",{attrs:{width:"100%",src:e.courseForm.coverImg,alt:""}})])],1)]),e._v(" "),s("br"),e._v(" "),s("el-form-item",{attrs:{label:"轮播图片",prop:"imgs"}},[s("div",[s("el-upload",{ref:"imgs",attrs:{action:e.requestUrl.fileUpload,data:{url:e.courseForm.imgs,property:"imgs"},"file-list":e.getFileList(e.courseForm.imgs,"imgs","array"),"list-type":"picture-card","http-request":e.uploadBanners,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[s("i",{staticClass:"el-icon-plus"})]),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"courseSection"==e.courseEnteringFormPart,expression:"courseEnteringFormPart=='courseSection'"}]},[s("div",{staticClass:"f-w-b height-50"},[e._v("章节")]),e._v(" "),e._l(e.courseForm.courseChapters,function(t,r){return s("el-form-item",{staticClass:"border-1-gray",staticStyle:{width:"100%","vertical-align":"middle"},attrs:{prop:"courseChapters."+r+".title",rules:{required:!0,message:"章节名不能为空",trigger:"blur"}}},[s("div",{staticClass:"section-add-item-ct"},[s("span",{staticClass:"course-section-remove",on:{click:function(s){e.removeCourseSection(t)}}},[s("i",{staticClass:"fa fa-minus-circle"})]),e._v(" "),s("div",{staticClass:"ps-rel",staticStyle:{"margin-bottom":"6px"}},[s("span",{staticClass:"f-w-b v-a-m"},[e._v("第"+e._s(r+1)+"章")]),e._v(" "),s("el-input",{staticClass:"section-name-input-ct v-a-m ml-15",attrs:{size:"small",placeholder:"请输入章节标题"},model:{value:t.title,callback:function(s){e.$set(t,"title",s)},expression:"sectionItem.title"}}),e._v(" "),s("span",{staticClass:"segment-add-ct",on:{click:function(t){e.addSectionSegment(r)}}},[s("i",{staticClass:"fa fa-plus-circle"})])],1),e._v(" "),e._l(t.courseSections,function(t,o){return s("el-form-item",{staticClass:"ps-rel mt-10 segment-item-add-ct .el-form-item__error",staticStyle:{width:"100%","margin-bottom":"8px"},attrs:{prop:"courseChapters."+r+".courseSections."+o+".title",rules:{required:!0,message:"域名不能为空",trigger:"blur"}}},[s("span",{staticClass:"segment-num"},[e._v(e._s(r+1)+"-"+e._s(o+1))]),e._v(" "),s("el-input",{staticClass:"segment-name-input-ct v-a-m ml-55",attrs:{size:"small",placeholder:"请输入小节标题"},model:{value:t.title,callback:function(s){e.$set(t,"title",s)},expression:"segmentItem.title"}}),e._v(" "),s("span",{staticClass:"segment-add-ct",on:{click:function(s){e.removeSectionSegment(r,t)}}},[s("i",{staticClass:"fa fa-minus-circle"})])],1)})],2)])}),e._v(" "),s("div",{staticClass:"add-item-car course-section-add mt-15",on:{click:function(t){e.addCourseSection()}}},[s("i",{staticClass:"fa fa-plus"})])],2),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"courseInstructor"==e.courseEnteringFormPart,expression:"courseEnteringFormPart=='courseInstructor'"}]},[s("el-form-item",{attrs:{label:"教师姓名",prop:"courseTeacher.realName"}},[s("el-input",{model:{value:e.courseForm.courseTeacher.realName,callback:function(t){e.$set(e.courseForm.courseTeacher,"realName",t)},expression:"courseForm.courseTeacher.realName"}})],1),e._v(" "),s("el-form-item",{staticClass:"real-Name-authenticated",attrs:{prop:"courseTeacher.realNameAuthenticationPassed",label:" "}},[s("span",[e._v("教师实名认证")]),e._v(" "),s("el-switch",{model:{value:e.courseForm.courseTeacher.realNameAuthenticationPassed,callback:function(t){e.$set(e.courseForm.courseTeacher,"realNameAuthenticationPassed",t)},expression:"courseForm.courseTeacher.realNameAuthenticationPassed"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{attrs:{label:"助教",prop:"courseTeacher.assistantName"}},[s("el-input",{model:{value:e.courseForm.courseTeacher.assistantName,callback:function(t){e.$set(e.courseForm.courseTeacher,"assistantName",t)},expression:"courseForm.courseTeacher.assistantName"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{attrs:{label:"教师所在地",prop:"courseTeacher.address.city"}},[s("el-input",{model:{value:e.courseForm.courseTeacher.address.city,callback:function(t){e.$set(e.courseForm.courseTeacher.address,"city",t)},expression:"courseForm.courseTeacher.address.city"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"教师简介",prop:"courseTeacher.introduction"}},[s("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.courseForm.courseTeacher.introduction,callback:function(t){e.$set(e.courseForm.courseTeacher,"introduction",t)},expression:"courseForm.courseTeacher.introduction"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"教师荣耀",prop:"courseTeacher.honours"}},[s("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.courseForm.courseTeacher.honours,callback:function(t){e.$set(e.courseForm.courseTeacher,"honours",t)},expression:"courseForm.courseTeacher.honours"}})],1),e._v(" "),s("br"),e._v(" "),s("el-form-item",{attrs:{label:"教师头像",prop:"courseTeacher.profilePhoto"}},[s("div",[s("el-upload",{ref:"profilePhoto",attrs:{action:e.requestUrl.fileUpload,"file-list":e.getFileList([e.courseForm.courseTeacher.profilePhoto],"courseTeacher.profilePhoto","string"),"list-type":"picture-card","http-request":e.uploadProfilePic,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[s("i",{staticClass:"el-icon-plus"})]),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)])],1)])],1)])]),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.stateObj.scCourseImportDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),"新增课程"==e.courseFormDialogTitle?s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showimportCourseDialog()}}},[e._v("课库导入")]):e._e(),e._v(" "),"新增课程"==e.courseFormDialogTitle?s("el-button",{attrs:{type:"success"},on:{click:function(t){e.saveAddedCourse("post",e.requestUrl.addCourse)}}},[e._v("录 入")]):e._e(),e._v(" "),"课程编辑"==e.courseFormDialogTitle?s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveAddedCourse("put",e.requestUrl.updateCourse)}}},[e._v("保 存")]):e._e()],1)])],1):e._e()},o=[],a={render:r,staticRenderFns:o};t.a=a},PvtR:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("eO0P"),o=s.n(r);for(var a in r)["default","default"].indexOf(a)<0&&function(e){s.d(t,e,function(){return r[e]})}(a);var i=s("j5kO"),n=s("Z0/y"),c=n(o.a,i.a,!1,null,null,null);t.default=c.exports},QF8L:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=s("4YfN"),a=r(o),i=s("ZLEe"),n=r(i),c=s("3cXf"),l=r(c),u=s("HVJf");t.default={components:{},data:function(){return{lessonTimePeriod:[],courseFormTitle:this.courseFormDialogTitle,courseList:[],eduStageList:["小学","初中","高中"],uploadRefNames:["coverImg","profilePhoto","imgs"],charpterItem:{sequenceNumber:0,title:"",description:"",courseSections:[]},searchFilter:{area:"小学",grade:1},segmentItem:{title:""},gradeListOrigin:[{value:1,name:"一年级"},{value:2,name:"二年级"},{value:3,name:"三年级"},{value:4,name:"四年级"},{value:5,name:"五年级"},{value:6,name:"六年级"},{value:7,name:"初一"},{value:8,name:"初二"},{value:9,name:"初三"},{value:10,name:"高一"},{value:11,name:"高二"},{value:12,name:"高三"}],levelList:["初级","中级","高级"],dayList:[{name:"星期一",value:1},{name:"星期二",value:2},{name:"星期三",value:3},{name:"星期四",value:4},{name:"星期五",value:5},{name:"星期六",value:6},{name:"星期天",value:7}],courseEnteringFormPart:"courseContent",dialogImageUrl:"",dialogVisible:!1,courseItem:{sectionList:[]},toAddCourseItem:{sectionList:[]},checkedCourseItem:{},classInfoSwiper:{},classDetailDialogVisible:!1,addCourseDialogVisible:!1,uploadImgTag:{},courseForm:{},courseFormTemplate:{schoolId:"schoolid",area:"",advancePayment:0,courseFee:0,name:"",grades:[],degreeOfDifficulty:"",numberOfStudentsFromPastToNow:0,score:0,introduction:"",coverImg:"",coverImgOnMobile:"",enabled:!1,extraFee:0,extraFeeExplain:"string",lessonBeginTime:"string",lessonEndTime:"string",lessonFee:0,lessonLocation:"",lessonDays:[],maxNumberOfStudents:0,numberOfLessons:0,startDate:"2018-04-08T12:59:38.729Z",imgs:[],description:"",studentIds:[],studentInfos:[],courseChapters:[{sequenceNumber:0,title:"",description:"",courseSections:[]}],courseTeacher:{realName:"",realNameAuthenticationPassed:!1,assistantName:"",introduction:"",honours:"",profilePhoto:"",address:{city:"珠海",detail:"string",district:"string",province:"string"}}},rules:{name:[{required:!0,message:"请输入课程名称",trigger:"blur"}],area:[{required:!0,message:"请选择学段",trigger:"change"}],lessonBeginTime:[{required:!0,message:"请选择课程时间段",trigger:"change"}],lessonLocation:[{required:!0,message:"请选择上课地点",trigger:"change"}],grades:[{type:"array",required:!0,message:"请选择课程年级",trigger:"change"}],imgs:[{type:"array",required:!0,message:"请至少上传一张课程介绍图片",trigger:"change"}],lessonDays:[{type:"array",required:!0,message:"请选择课程上课时间",trigger:"change"}],degreeOfDifficulty:[{required:!0,message:"请选择课程难度",trigger:"change"}],introduction:[{required:!0,message:"请填写封面介绍",trigger:"change"}],description:[{required:!0,message:"请填写课程简介",trigger:"change"}],coverImg:[{required:!0,message:"请上传课程封面",trigger:"change"}],"courseTeacher.realName":[{required:!0,message:"请输入教师姓名",trigger:"blur"}],"courseTeacher.assistantName":[{required:!0,message:"请输入助教姓名",trigger:"blur"}],"courseTeacher.introduction":[{required:!0,message:"请输入教师简介",trigger:"blur"}],"courseTeacher.honours":[{required:!0,message:"请输入教师荣誉简介",trigger:"blur"}],"courseTeacher.profilePhoto":[{required:!0,message:"请上传教师头像",trigger:"change"}],"courseTeacher.address.city":[{required:!0,trigger:"blur"}]}}},props:{courseFormDialogTitle:String,editCourseItem:Object,formModel:String},beforeCreate:function(){},created:function(){},mounted:function(){var e=this;vueBus.$on("importCourseSelected",function(t){e.importCourseInfo(t)}),e.courseForm=Vue.util.extend({},JSON.parse((0,l.default)(e.courseFormTemplate)))},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{notifyTR:function(){this.$notify({title:"提示",message:arguments[0],position:"top-right",type:arguments[1]})},showimportCourseDialog:function(){this.stateObj.courseImportDialogVisible=!0},importCourseInfo:function(e){var t=this;(0,n.default)(e).forEach(function(s){if(t.courseForm.hasOwnProperty(s))if(null===e[s]||void 0===e[s])t.courseForm[s]=e[s];else{var r=Object.prototype.toString.call(e[s]).slice(8,-1);t.courseForm[s]="Object"==r||"Array"==r?JSON.parse((0,l.default)(e[s])):e[s]}})},onCourseFormDialogOpen:function(){var e=this;"课程编辑"==e.courseFormDialogTitle?e.courseForm=Vue.util.extend({},JSON.parse((0,l.default)(e.editCourseItem))):e.courseForm=Vue.util.extend({},JSON.parse((0,l.default)(e.courseFormTemplate)))},getFileList:function(e,t,s){var r=[];return e.forEach(function(e){e&&r.push({url:e,property:t,propertyType:s})}),r},checkCourseInfo:function(){var e=this;e.classDetailDialogVisible=!0,e.checkedCourseItem=arguments[0],e.$nextTick(function(){e.classInfoSwiper=new Swiper(".swiper-container",{pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",clickable:!0}})})},toggleSegmentVisible:function(e){e.segmentVisible=!e.segmentVisible},editCourse:function(){var e=this;arguments[1].stopPropagation(),e.courseForm=Vue.util.extend({},JSON.parse((0,l.default)(arguments[0]))),e.addCourseDialogVisible=!0,e.courseDialogTitle="课程编辑",e.courseEnteringFormPart="courseContent"},onAddCourseDialogClose:function(){var e=this;e.$refs.courseForm.resetFields(),e.clearUploadFiles()},onclassDetailDialogOpen:function(){},openAddCourseDialog:function(){var e=this;e.addCourseDialogVisible=!0,e.courseDialogTitle="课程录入",e.courseEnteringFormPart="courseContent",e.courseForm=Vue.util.extend({},JSON.parse((0,l.default)(e.courseFormTemplate)))},selectSearchFilter:function(e,t){var s=this;switch(s.searchFilter[e]=t,t){case"小学":s.searchFilter.grade=1;break;case"初中":s.searchFilter.grade=7;break;case"高中":s.searchFilter.grade=10}s.loadCourse()},handleBeforeRemove:function(){},getImgUrl:function(e,t){if("string"==t)return"";var s=[];return e.forEach(function(e){s.push(e.url)}),s},handleRemove:function(e,t){var s=this,r=e.url,o=e.property,a=e.propertyType,i=o.split(".");s.$axios.delete(s.requestUrl.fileDelete,{params:{url:r}}).then(function(e){var r=s.getImgUrl(t,a);switch(i.length){case 1:s.courseForm[i[0]]=r;break;case 2:s.courseForm[i[0]][i[1]]=r;break;case 3:s.courseForm[i[0]][i[1]][i[2]]=r}}).catch(function(e){s.notifyTR("删除图片失败,请检查网络是否连通","error"),console.log(e)})},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},switchEnteringFormPart:function(){this.courseEnteringFormPart=arguments[0]},removeCourseFromLocalList:function(e){var t=this,s=t.courseList.indexOf(e);t.courseList.splice(s,1)},addCourseSection:function(){var e=this;e.courseForm.courseChapters.push(JSON.parse((0,l.default)(e.charpterItem)))},removeCourseSection:function(e){var t=this,s=t.courseForm.courseChapters.indexOf(e);t.courseForm.courseChapters.splice(s,1)},addSectionSegment:function(e){var t=this;t.courseForm.courseChapters[e].courseSections.push(JSON.parse((0,l.default)(t.segmentItem)))},removeSectionSegment:function(e,t){var s=this,r=s.courseForm.courseChapters[e].courseSections.indexOf(t);s.courseForm.courseChapters[e].courseSections.splice(r,1)},handleCoverSuccessUpload:function(e,t,s){this.courseItem.coverImg=e},clearUploadFiles:function(){var e=this;e.uploadRefNames.forEach(function(t){e.$refs[t].clearFiles()})},imgUploadRequest:function(e,t,s){var r=this,o={headers:{"Content-Type":"multipart/form-data"}};r.$axios.post(t,s,o).then(function(t){switch(e){case"coverImg":r.courseForm.coverImg=t.data;break;case"imgs":r.courseForm.imgs.push(t.data);break;case"profilePhoto":r.courseForm.courseTeacher.profilePhoto=t.data}}).catch(function(e){alert("图片上传失败"),console.log(e)})},getImgFormdata:function(){var e=arguments[0],t=e.file,s=(e.action,new FormData);return s.append("multipartFile",t),s},uploadCover:function(){var e=this,t=e.getImgFormdata(arguments[0]);e.imgUploadRequest("coverImg",arguments[0].action,t)},uploadProfilePic:function(){var e=this,t=e.getImgFormdata(arguments[0]);e.imgUploadRequest("profilePhoto",arguments[0].action,t)},uploadBanners:function(){var e=this,t=e.getImgFormdata(arguments[0]);e.imgUploadRequest("imgs",arguments[0].action,t)},validateForm:function(e){var t=this,s=!1;return t.$refs[e].validate(function(e){s=e}),s},saveAddedCourse:function(e,t){var s=this;s.validateForm("courseForm")?(console.table(s.courseForm),s.$axios[e](t,s.courseForm).then(function(e){s.notifyTR("课程保存成功","success"),"新增课程"==s.courseDialogTitle?s.courseList.push(e.data):s.courseList.forEach(function(t,r){t.id==e.data.id&&s.courseList.splice(r,1,s.courseForm)}),s.addCourseDialogVisible=!1}).catch(function(e){s.notifyTR("课程保存失败,请检查网络是否连通","error"),console.log(e)})):s.$alert("请完整填写课程表单信息","提示",{confirmButtonText:"确定"})}},computed:(0,a.default)({},(0,u.mapState)(["stateObj","requestUrl"]),{gradeList:function(){var e=this;return function(t){var s=1,r=6;switch(t){case"小学":s=1,r=6;break;case"初中":s=7,r=9;break;case"高中":s=10,r=12}return e.gradeListOrigin.filter(function(e){return e.value>=s&&e.value<=r})}}}),watch:{courseFormDialogTitle:function(e){var t=this;e&&t.onCourseFormDialogOpen()}},filter:{}}},ZLEe:function(e,t,s){e.exports={default:s("rhsp"),__esModule:!0}},eO0P:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=s("4YfN"),a=r(o),i=s("3cXf"),n=r(i),c=s("HVJf"),l=s("n2+R"),u=r(l),m=s("yQwI"),d=r(m);t.default={components:{courseImport:u.default,scCourseForm:d.default},data:function(){return{loading:!1,courseImportVisible:!1,radio:"",scCourseInfoVisible:!1,selectedGrade:"二年级",selectedType:"第三方课程",gradeList:[{name:"一年级",value:1},{name:"二年级",value:2},{name:"三年级",value:3},{name:"四年级",value:4},{name:"五年级",value:5},{name:"六年级",value:6},{name:"七年级",value:7},{name:"八年级",value:8},{name:"九年级",value:9}],classTypes:[{name:"本校课程"},{name:"第三方课程"}],searchFilter:{conditions:[{operator:"EQUALS",property:"grade",value:[4]}],connect:"AND",sort:{orders:[{direction:"ASC",property:"id"}]}},courseList:[],selectedCourseItem:{},editCourseItem:{},courseFormDialogTitle:""}},beforeCreate:function(){},created:function(){},mounted:function(){this.loadCourse()},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{notifyTR:function(){this.$notify({title:"提示",message:arguments[0],position:"top-right",type:arguments[1]})},selecteGrade:function(e){var t=this;t.selectedGrade=e.name,t.setFilter("grade",e.value)},setFilter:function(e,t){var s=this,r=s.searchFilter.conditions.find(function(t){return t.property==e});r&&(r.value=t),s.loadCourse()},selecteType:function(e){this.selectedType=e.name},showCourseImportDialog:function(){this.stateObj.courseImportDialogVisible=!0},setCourseSaleFlag:function(e,t,s){var r=this,o=JSON.parse((0,n.default)(e));o.enabled=t,r.$axios.put(r.requestUrl.updateCourse,o).then(function(s){e.enabled=t,r.notifyTR("success",t?"成功上架课程":"成功下架课程"),r.loading=!1}).catch(function(e){r.loading=!1,console.log("loadCourse:"+e)})},loadCourse:function(){var e=this;e.loading=!0,e.$axios.post(e.requestUrl.queryCourse,e.searchFilter).then(function(t){e.courseList=t.data,e.loading=!1}).catch(function(t){e.loading=!1,console.log("loadCourse:"+t)})},removeCourseFromLocalList:function(e){var t=this,s=t.courseList.indexOf(e);t.courseList.splice(s,1)},checkCourseInfo:function(e){var t=this;t.scCourseInfoVisible=!0,t.selectedCourseItem=e},editCourse:function(e,t){var s=this;t.stopPropagation(),s.editCourseItem=Vue.util.extend({},JSON.parse((0,n.default)(e))),s.$nextTick(function(){s.courseFormDialogTitle="课程编辑",s.stateObj.scCourseImportDialogVisible=!0})},addCourse:function(e){var t=this;e.stopPropagation(),t.stateObj.scCourseImportDialogVisible=!0,t.courseFormDialogTitle="新增课程"},removeCourse:function(e,t){var s=arguments,r=this;t.stopPropagation(),r.$axios.delete(r.requestUrl.removeCourse,{data:{id:e.id}}).then(function(e){r.notifyTR("成功删除课程","success"),r.removeCourseFromLocalList(s[0])}).catch(function(e){r.notifyTR("删除课程失败,请检查网络是否连通","error"),console.log(e)})}},computed:(0,a.default)({},(0,c.mapState)(["stateObj","requestUrl"])),watch:{searchFilter:{handler:function(){this.loadCourse()},deep:!0}},filter:{}}},j5kO:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"view-container"},[s("div",{staticClass:"h-50 f-w-b f-s-20"},[e._m(0),e._v(" "),s("div",{staticClass:"f-r mr-20 f-s-26"},[s("span",{on:{click:function(t){e.addCourse(t)}}},[s("i",{staticClass:"fa fa-plus-circle"})])])]),e._v(" "),s("div",{staticClass:"h-50 p-l-20"},e._l(e.gradeList,function(t){return s("span",{staticClass:"in-b mr-20 inline-filter-item",class:{"selected-blue":e.selectedGrade==t.name},on:{click:function(s){e.selecteGrade(t)}}},[e._v(e._s(t.name))])})),e._v(" "),s("div",{staticClass:"h-50 p-l-20"},e._l(e.classTypes,function(t,r){return s("span",{staticClass:"in-b mr-20 inline-filter-item",class:{"selected-blue":e.selectedType==t.name},on:{click:function(s){e.selecteType(t)}}},[e._v(e._s(t.name))])})),e._v(" "),e._m(1),e._v(" "),s("div",{staticClass:"scCourse-content-ct"},e._l(e.courseList,function(t){return s("div",{staticClass:"class-item class-item-home",on:{click:function(s){e.checkCourseInfo(t)}}},[s("div",{staticClass:"class-cover",style:{backgroundImage:"url("+t.coverImg+")"}},[s("div",{staticClass:"course-handler-ct"},[s("div",[s("span",{staticClass:"course-handler-btn",on:{click:function(s){e.editCourse(t,s)}}},[s("i",{staticClass:"fa fa-edit"})]),e._v(" "),s("span",{staticClass:"course-handler-btn",on:{click:function(s){e.removeCourse(t,s)}}},[s("i",{staticClass:"fa fa-trash"})])])])]),e._v(" "),s("div",{staticClass:"p-h-5"},[s("div",{staticClass:"class-name"},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"class-property"},[s("div",[s("span",{staticClass:"pro-level"},[e._v(e._s(t.degreeOfDifficulty))]),e._v(" "),s("span",{staticClass:"ml-10"},[e._v("学时："+e._s(t.numberOfLessons))]),e._v(" "),s("span",{staticClass:"ml-10"},[e._v("学位："+e._s(t.numberOfLessons))])]),e._v(" "),s("div",[s("span",{},[e._v(e._s(e._f("dayTransform")(t.lessonDays[0])))]),e._v(" "),s("span",{staticClass:"ml-10"},[e._v("16:00-17:00")])]),e._v(" "),s("div",[s("span",[e._v("授课教师："+e._s(t.courseTeacher.realName))])])]),e._v(" "),s("div",{staticClass:"h-40 f-s-20"},[s("div",{staticClass:"f-l f-w-b"},[s("span",{staticClass:"scCourse-course-price"},[e._v("¥"+e._s(t.courseFee))])]),e._v(" "),s("div",{staticClass:"f-r"},[t.enabled?e._e():s("span",{staticClass:"scCourse-course-state-handle-btn",on:{click:function(s){e.setCourseSaleFlag(t,!0,s)}}},[e._v("上架")]),e._v(" "),t.enabled?s("span",{staticClass:"scCourse-course-state-handle-btn bg-green",on:{click:function(s){e.setCourseSaleFlag(t,!1,s)}}},[e._v("下架")]):e._e()])])])])})),e._v(" "),s("div",[s("course-import",{attrs:{courseImportVisible:e.stateObj.courseImportDialogVisible},on:{"update:courseImportVisible":function(t){e.$set(e.stateObj,"courseImportDialogVisible",t)}}}),e._v(" "),s("sc-course-form",{attrs:{editCourseItem:e.editCourseItem,courseFormDialogTitle:e.courseFormDialogTitle},on:{"update:editCourseItem":function(t){e.editCourseItem=t},"update:courseFormDialogTitle":function(t){e.courseFormDialogTitle=t}}})],1)])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"f-l ml-20"},[s("span",[e._v("本学期课程")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"h-50 f-w-b f-s-20"},[s("div",{staticClass:"f-l ml-20"},[s("span",{staticClass:"scCourse-date-des"},[e._v("2018年9月3日——2018年9月13日")])]),e._v(" "),s("div",{staticClass:"f-r mr-20"},[s("span",[s("i",{staticClass:"fa fa-ellipsis-h"})])])])}],a={render:r,staticRenderFns:o};t.a=a},"n2+R":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("3u2N"),o=s.n(r);for(var a in r)["default","default"].indexOf(a)<0&&function(e){s.d(t,e,function(){return r[e]})}(a);var i=s("v8YE"),n=s("Z0/y"),c=n(o.a,i.a,!1,null,null,null);t.default=c.exports},rhsp:function(e,t,s){s("CLwS"),e.exports=s("UusJ").Object.keys},v8YE:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{},[e.stateObj.courseImportDialogVisible?s("el-dialog",{staticClass:"eca-dialog-header",attrs:{title:"课程导入",visible:e.stateObj.courseImportDialogVisible,width:"1025px"},on:{close:function(e){},"update:visible":function(t){e.$set(e.stateObj,"courseImportDialogVisible",t)}}},[s("div",{staticClass:"dialog-body dialog-body-750 f-clear"},[s("div",{},[s("div",{staticClass:"h-50 p-l-20"},e._l(e.gradeList,function(t){return s("span",{staticClass:"in-b mr-20 inline-filter-item",class:{"selected-blue":e.selectedGrade==t.name},on:{click:function(s){e.selecteGrade(t)}}},[e._v(e._s(t.name))])})),e._v(" "),s("div",{staticClass:"h-50 p-l-20"},e._l(e.classTypes,function(t,r){return s("span",{staticClass:"in-b mr-20 inline-filter-item",class:{"selected-blue":e.selectedType==t.name},on:{click:function(s){e.selecteType(t)}}},[e._v(e._s(t.name))])}))]),e._v(" "),s("div",{staticClass:"import-course-list-ct p-h-20"},e._l(e.courseList,function(t){return s("div",{staticClass:"class-item class-item-home"},[s("div",{staticClass:"class-cover",style:{backgroundImage:"url("+t.coverImg+")"}},[s("div",{staticClass:"course-handler-ct"},[s("div"),e._v(" "),s("div")]),e._v(" "),s("span",{staticClass:"course-selected-flag",class:{"selected-green":e.selectedCourse.id==t.id},on:{click:function(s){e.selectSingleCourse(t,s)}}},[s("i",{staticClass:"fa fa-check-circle"})])]),e._v(" "),s("div",{staticClass:"class-name"},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"class-property"},[s("span",{staticClass:"pro-level"},[e._v(e._s(t.degreeOfDifficulty))]),e._v(" "),s("span",{staticClass:"pro-member-count"},[s("i",{staticClass:"fa fa-user"}),e._v(e._s(t.numberOfStudentsFromPastToNow))])]),e._v(" "),s("div",{staticClass:"member-des home-course-des"},[e._v(e._s(t.introduction))])])}))]),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.stateObj.courseImportDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"success"},on:{click:function(t){e.importCourse()}}},[e._v("确定")])],1)]):e._e()],1)},o=[],a={render:r,staticRenderFns:o};t.a=a},yQwI:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("QF8L"),o=s.n(r);for(var a in r)["default","default"].indexOf(a)<0&&function(e){s.d(t,e,function(){return r[e]})}(a);var i=s("N0+X"),n=s("Z0/y"),c=n(o.a,i.a,!1,null,null,null);t.default=c.exports}});
//# sourceMappingURL=2.9322a10722ff67205dd8.js.map