webpackJsonp([2],{"3cXf":function(e,s,t){e.exports={default:t("4rP4"),__esModule:!0}},"3u2N":function(e,s,t){"use strict";var r=t("4YfN"),o=t.n(r),a=t("3cXf"),i=t.n(a),n=t("HVJf");s.a={components:{},data:function(){return{selectedGrade:"二年级",selectedType:1,gradeList:[{name:"一年级"},{name:"二年级"},{name:"三年级"},{name:"四年级"},{name:"五年级"},{name:"六年级"},{name:"七年级"},{name:"八年级"},{name:"九年级"}],classTypes:[{name:"本校课程"},{name:"第三方课程"}],searchFilter:{area:"小学",grade:1},courseList:[],selectedCourseList:[],selectedCourse:{}}},props:{},beforeCreate:function(){},created:function(){},mounted:function(){this.loadCourse()},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{selecteGrade:function(e){this.selectedGrade=e.name},selecteType:function(e){this.selectedType=e.name},selectSingleCourse:function(e,s){var t=this;s.stopPropagation(),t.selectedCourse=JSON.parse(i()(e))},selectCourse:function(e,s){var t=this;s.stopPropagation(),t.selectedCourseList.indexOf(e.id)<=-1?t.selectedCourseList.push(e.id):t.selectedCourseList.splice(t.selectedCourseList.indexOf(e.id),1)},importCourse:function(){var e=this;vueBus.$emit("importCourseSelected",e.selectedCourse),e.selectCourse={},e.stateObj.courseImportDialogVisible=!1},loadCourse:function(){var e=this;e.loading=!0,e.$axios.post(e.requestUrl.queryCourseTemplateByFilter,e.searchFilter).then(function(s){e.courseList=s.data,e.loading=!1}).catch(function(s){e.loading=!1,console.log("loadCourse:"+s)})}},computed:o()({},t.i(n.mapState)(["stateObj","requestUrl"])),watch:{},filter:{}}},"4rP4":function(e,s,t){var r=t("UusJ"),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},CLwS:function(e,s,t){var r=t("NUpW"),o=t("OtAM");t("Mx9c")("keys",function(){return function(e){return o(r(e))}})},Mx9c:function(e,s,t){var r=t("MITN"),o=t("UusJ"),a=t("xVzf");e.exports=function(e,s){var t=(o.Object||{})[e]||Object[e],i={};i[e]=s(t),r(r.S+r.F*a(function(){t(1)}),"Object",i)}},"N0+X":function(e,s,t){"use strict";var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.stateObj.scCourseImportDialogVisible?t("div",[t("el-dialog",{staticClass:"eca-dialog-header addCourse-dialog",attrs:{title:e.courseFormDialogTitle,visible:e.stateObj.scCourseImportDialogVisible,width:"1152px"},on:{open:e.onCourseFormDialogOpen,"update:visible":function(s){e.$set(e.stateObj,"scCourseImportDialogVisible",s)}}},[t("div",{staticClass:"dialog-body f-clear addCourse-dialog-body"},[t("div",{staticClass:"add-course-left f-l h-p-100"},[e._l([e.courseForm],function(s){return t("div",{staticClass:"class-item class-item-addCourseDialog mg-center"},[t("div",{staticClass:"class-cover",style:{backgroundImage:"url("+e.courseForm.coverImg+")"}}),e._v(" "),t("div",{staticClass:"course-info-detail-ct"},[t("div",{staticClass:"p-h-5"},[t("div",{staticClass:"class-name"},[e._v(e._s(s.name))]),e._v(" "),t("div",{staticClass:"class-property"},[t("div",[t("span",{staticClass:"pro-level"},[e._v(e._s(s.degreeOfDifficulty||"初级"))]),e._v(" "),t("span",{staticClass:"ml-10"},[e._v("学时："+e._s(s.numberOfLessons))]),e._v(" "),t("span",{staticClass:"ml-10"},[e._v("学位："+e._s(s.maxNumberOfStudents))])]),e._v(" "),t("div",[s.lessonDays.length>0?t("span",{},[e._v(e._s(e._f("dayTransform")(s.lessonDays[0])))]):e._e(),e._v(" "),t("span",{staticClass:"ml-10"},[e._v("16:00-17:00")])]),e._v(" "),t("div",[t("span",[e._v("授课教师："+e._s(s.courseTeacher.realName))])])]),e._v(" "),t("div",{staticClass:"h-40 f-s-20"},[t("div",{staticClass:"f-l f-w-b"},[t("span",{staticClass:"scCourse-course-price"},[e._v("¥"+e._s(s.courseFee))])])])])])])}),e._v(" "),t("div",{staticClass:"add-item-car course-entering-add mt-15 f-s-16 hidden"},[t("i",{staticClass:"fa fa-plus"})])],2),e._v(" "),t("div",{staticClass:"add-course-right f-r h-p-100"},[t("div",{staticClass:"tag-switch-bar height-50"},[t("span",{staticClass:"tag-selected",on:{click:function(s){e.switchEnteringFormPart("courseContent")}}},[e._v("课程内容")]),e._v(" "),t("span",{on:{click:function(s){e.switchEnteringFormPart("courseSection")}}},[e._v("课程章节")]),e._v(" "),t("span",{on:{click:function(s){e.switchEnteringFormPart("courseInstructor")}}},[e._v("任课老师")]),e._v(" "),t("span",{on:{click:function(s){e.switchEnteringFormPart("courseFee")}}},[e._v("课程费用")])]),e._v(" "),t("div",{staticClass:"course-entering-form p-l-15"},[t("el-form",{ref:"courseForm",staticClass:"demo-courseForm",attrs:{model:e.courseForm,rules:e.rules,inline:!0,size:"medium","label-width":"100px","label-position":"top"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"courseFee"==e.courseEnteringFormPart,expression:"courseEnteringFormPart=='courseFee'"}]},[t("el-form-item",{attrs:{label:"课时",prop:"numberOfLessons"}},[t("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.courseForm.numberOfLessons,callback:function(s){e.$set(e.courseForm,"numberOfLessons",s)},expression:"courseForm.numberOfLessons"}})],1),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"预支教务费用",prop:"advancePayment"}},[t("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.courseForm.advancePayment,callback:function(s){e.$set(e.courseForm,"advancePayment",s)},expression:"courseForm.advancePayment"}})],1),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"课程学费",prop:"courseFee"}},[t("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.courseForm.courseFee,callback:function(s){e.$set(e.courseForm,"courseFee",s)},expression:"courseForm.courseFee"}})],1),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"其它费用",prop:"extraFee"}},[t("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.courseForm.extraFee,callback:function(s){e.$set(e.courseForm,"extraFee",s)},expression:"courseForm.extraFee"}})],1),e._v(" "),t("br"),e._v(" "),t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"其他费用备注",prop:"extraFeeExplain"}},[t("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.courseForm.extraFeeExplain,callback:function(s){e.$set(e.courseForm,"extraFeeExplain",s)},expression:"courseForm.extraFeeExplain"}})],1)],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"courseContent"==e.courseEnteringFormPart,expression:"courseEnteringFormPart=='courseContent'"}]},[t("el-form-item",{attrs:{label:"课程名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入课程名称"},model:{value:e.courseForm.name,callback:function(s){e.$set(e.courseForm,"name",s)},expression:"courseForm.name"}})],1),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"学段",prop:"area"}},[t("div",[t("el-radio-group",{model:{value:e.courseForm.area,callback:function(s){e.$set(e.courseForm,"area",s)},expression:"courseForm.area"}},e._l(e.eduStageList,function(e){return t("el-radio-button",{attrs:{label:e}})}))],1)]),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"年级",prop:"grades"}},[t("div",[t("el-checkbox-group",{model:{value:e.courseForm.grades,callback:function(s){e.$set(e.courseForm,"grades",s)},expression:"courseForm.grades"}},e._l(e.gradeList(e.courseForm.area),function(s){return t("el-checkbox-button",{attrs:{label:s.value}},[e._v(e._s(s.name))])}))],1)]),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"难度",prop:"degreeOfDifficulty"}},[t("div",[t("el-radio-group",{model:{value:e.courseForm.degreeOfDifficulty,callback:function(s){e.$set(e.courseForm,"degreeOfDifficulty",s)},expression:"courseForm.degreeOfDifficulty"}},e._l(e.levelList,function(e){return t("el-radio-button",{attrs:{label:e}})}))],1)]),e._v(" "),t("el-form-item",{staticStyle:{width:"132px"},attrs:{label:"课时",prop:"numberOfLessons"}},[t("el-input-number",{attrs:{"controls-position":"right"},model:{value:e.courseForm.numberOfLessons,callback:function(s){e.$set(e.courseForm,"numberOfLessons",s)},expression:"courseForm.numberOfLessons"}})],1),e._v(" "),t("el-form-item",{staticStyle:{width:"132px"},attrs:{label:"学位",prop:"maxNumberOfStudents"}},[t("el-input-number",{attrs:{min:1,"controls-position":"right"},model:{value:e.courseForm.maxNumberOfStudents,callback:function(s){e.$set(e.courseForm,"maxNumberOfStudents",s)},expression:"courseForm.maxNumberOfStudents"}})],1),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"开始时间",prop:"lessonBeginTime"}},[t("div",[t("el-time-picker",{attrs:{align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",placeholder:"选择开始时间"},model:{value:e.courseForm.lessonBeginTime,callback:function(s){e.$set(e.courseForm,"lessonBeginTime",s)},expression:"courseForm.lessonBeginTime"}})],1)]),e._v(" "),t("el-form-item",{attrs:{label:"结束时间",prop:"lessonEndTime"}},[t("div",[t("el-time-picker",{attrs:{align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",placeholder:"选择结束时间"},model:{value:e.courseForm.lessonEndTime,callback:function(s){e.$set(e.courseForm,"lessonEndTime",s)},expression:"courseForm.lessonEndTime"}})],1)]),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"时间",prop:"lessonDays"}},[t("div",[t("el-checkbox-group",{model:{value:e.courseForm.lessonDays,callback:function(s){e.$set(e.courseForm,"lessonDays",s)},expression:"courseForm.lessonDays"}},e._l(e.dayList,function(s){return t("el-checkbox-button",{attrs:{label:s.value}},[e._v(e._s(s.name))])}))],1)]),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"上课地点",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输上课地点"},model:{value:e.courseForm.lessonLocation,callback:function(s){e.$set(e.courseForm,"lessonLocation",s)},expression:"courseForm.lessonLocation"}})],1),e._v(" "),t("br"),e._v(" "),t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"课程简介",prop:"introduction"}},[t("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.courseForm.introduction,callback:function(s){e.$set(e.courseForm,"introduction",s)},expression:"courseForm.introduction"}})],1),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"封面",prop:"coverImg"}},[t("div",[t("el-upload",{ref:"coverImg",attrs:{action:e.requestUrl.fileUpload,data:{url:e.courseForm.coverImg,property:"coverImg"},"file-list":e.getFileList([e.courseForm.coverImg],"coverImg","string"),"list-type":"picture-card","http-request":e.uploadCover,"before-remove":e.handleBeforeRemove(e.courseForm.coverImg),"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[t("i",{staticClass:"el-icon-plus"})]),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(s){e.dialogVisible=s}}},[t("img",{attrs:{width:"100%",src:e.courseForm.coverImg,alt:""}})])],1)]),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"轮播图片",prop:"imgs"}},[t("div",[t("el-upload",{ref:"imgs",attrs:{action:e.requestUrl.fileUpload,data:{url:e.courseForm.imgs,property:"imgs"},"file-list":e.getFileList(e.courseForm.imgs,"imgs","array"),"list-type":"picture-card","http-request":e.uploadBanners,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[t("i",{staticClass:"el-icon-plus"})]),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(s){e.dialogVisible=s}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)])],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"courseSection"==e.courseEnteringFormPart,expression:"courseEnteringFormPart=='courseSection'"}]},[t("div",{staticClass:"f-w-b height-50"},[e._v("章节")]),e._v(" "),e._l(e.courseForm.courseChapters,function(s,r){return t("el-form-item",{staticClass:"border-1-gray",staticStyle:{width:"100%","vertical-align":"middle"},attrs:{prop:"courseChapters."+r+".title",rules:{required:!0,message:"章节名不能为空",trigger:"blur"}}},[t("div",{staticClass:"section-add-item-ct"},[t("span",{staticClass:"course-section-remove",on:{click:function(t){e.removeCourseSection(s)}}},[t("i",{staticClass:"fa fa-minus-circle"})]),e._v(" "),t("div",{staticClass:"ps-rel",staticStyle:{"margin-bottom":"6px"}},[t("span",{staticClass:"f-w-b v-a-m"},[e._v("第"+e._s(r+1)+"章")]),e._v(" "),t("el-input",{staticClass:"section-name-input-ct v-a-m ml-15",attrs:{size:"small",placeholder:"请输入章节标题"},model:{value:s.title,callback:function(t){e.$set(s,"title",t)},expression:"sectionItem.title"}}),e._v(" "),t("span",{staticClass:"segment-add-ct",on:{click:function(s){e.addSectionSegment(r)}}},[t("i",{staticClass:"fa fa-plus-circle"})])],1),e._v(" "),e._l(s.courseSections,function(s,o){return t("el-form-item",{staticClass:"ps-rel mt-10 segment-item-add-ct .el-form-item__error",staticStyle:{width:"100%","margin-bottom":"8px"},attrs:{prop:"courseChapters."+r+".courseSections."+o+".title",rules:{required:!0,message:"域名不能为空",trigger:"blur"}}},[t("span",{staticClass:"segment-num"},[e._v(e._s(r+1)+"-"+e._s(o+1))]),e._v(" "),t("el-input",{staticClass:"segment-name-input-ct v-a-m ml-55",attrs:{size:"small",placeholder:"请输入小节标题"},model:{value:s.title,callback:function(t){e.$set(s,"title",t)},expression:"segmentItem.title"}}),e._v(" "),t("span",{staticClass:"segment-add-ct",on:{click:function(t){e.removeSectionSegment(r,s)}}},[t("i",{staticClass:"fa fa-minus-circle"})])],1)})],2)])}),e._v(" "),t("div",{staticClass:"add-item-car course-section-add mt-15",on:{click:function(s){e.addCourseSection()}}},[t("i",{staticClass:"fa fa-plus"})])],2),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"courseInstructor"==e.courseEnteringFormPart,expression:"courseEnteringFormPart=='courseInstructor'"}]},[t("el-form-item",{attrs:{label:"教师姓名",prop:"courseTeacher.realName"}},[t("el-input",{model:{value:e.courseForm.courseTeacher.realName,callback:function(s){e.$set(e.courseForm.courseTeacher,"realName",s)},expression:"courseForm.courseTeacher.realName"}})],1),e._v(" "),t("el-form-item",{staticClass:"real-Name-authenticated",attrs:{prop:"courseTeacher.realNameAuthenticationPassed",label:" "}},[t("span",[e._v("教师实名认证")]),e._v(" "),t("el-switch",{model:{value:e.courseForm.courseTeacher.realNameAuthenticationPassed,callback:function(s){e.$set(e.courseForm.courseTeacher,"realNameAuthenticationPassed",s)},expression:"courseForm.courseTeacher.realNameAuthenticationPassed"}})],1),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"助教",prop:"courseTeacher.assistantName"}},[t("el-input",{model:{value:e.courseForm.courseTeacher.assistantName,callback:function(s){e.$set(e.courseForm.courseTeacher,"assistantName",s)},expression:"courseForm.courseTeacher.assistantName"}})],1),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"教师所在地",prop:"courseTeacher.address.city"}},[t("el-input",{model:{value:e.courseForm.courseTeacher.address.city,callback:function(s){e.$set(e.courseForm.courseTeacher.address,"city",s)},expression:"courseForm.courseTeacher.address.city"}})],1),e._v(" "),t("br"),e._v(" "),t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"教师简介",prop:"courseTeacher.introduction"}},[t("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.courseForm.courseTeacher.introduction,callback:function(s){e.$set(e.courseForm.courseTeacher,"introduction",s)},expression:"courseForm.courseTeacher.introduction"}})],1),e._v(" "),t("br"),e._v(" "),t("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"教师荣耀",prop:"courseTeacher.honours"}},[t("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.courseForm.courseTeacher.honours,callback:function(s){e.$set(e.courseForm.courseTeacher,"honours",s)},expression:"courseForm.courseTeacher.honours"}})],1),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:"教师头像",prop:"courseTeacher.profilePhoto"}},[t("div",[t("el-upload",{ref:"profilePhoto",attrs:{action:e.requestUrl.fileUpload,"file-list":e.getFileList([e.courseForm.courseTeacher.profilePhoto],"courseTeacher.profilePhoto","string"),"list-type":"picture-card","http-request":e.uploadProfilePic,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[t("i",{staticClass:"el-icon-plus"})]),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(s){e.dialogVisible=s}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)])],1)])],1)])]),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(s){e.stateObj.scCourseImportDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),"新增课程"==e.courseFormDialogTitle?t("el-button",{attrs:{type:"primary"},on:{click:function(s){e.showimportCourseDialog()}}},[e._v("课库导入")]):e._e(),e._v(" "),"新增课程"==e.courseFormDialogTitle?t("el-button",{attrs:{type:"success"},on:{click:function(s){e.saveAddedCourse("post",e.requestUrl.addCourse)}}},[e._v("录 入")]):e._e(),e._v(" "),"课程编辑"==e.courseFormDialogTitle?t("el-button",{attrs:{type:"primary"},on:{click:function(s){e.saveAddedCourse("put",e.requestUrl.updateCourse)}}},[e._v("保 存")]):e._e()],1)])],1):e._e()},o=[],a={render:r,staticRenderFns:o};s.a=a},PvtR:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=t("eO0P"),o=t("j5kO"),a=t("Z0/y"),i=a(r.a,o.a,!1,null,null,null);s.default=i.exports},QF8L:function(e,s,t){"use strict";var r=t("4YfN"),o=t.n(r),a=t("ZLEe"),i=t.n(a),n=t("3cXf"),c=t.n(n),l=t("HVJf");s.a={components:{},data:function(){return{lessonTimePeriod:[],courseFormTitle:this.courseFormDialogTitle,courseList:[],eduStageList:["小学","初中","高中"],uploadRefNames:["coverImg","profilePhoto","imgs"],charpterItem:{sequenceNumber:0,title:"",description:"",courseSections:[]},searchFilter:{area:"小学",grade:1},segmentItem:{title:""},gradeListOrigin:[{value:1,name:"一年级"},{value:2,name:"二年级"},{value:3,name:"三年级"},{value:4,name:"四年级"},{value:5,name:"五年级"},{value:6,name:"六年级"},{value:7,name:"初一"},{value:8,name:"初二"},{value:9,name:"初三"},{value:10,name:"高一"},{value:11,name:"高二"},{value:12,name:"高三"}],levelList:["初级","中级","高级"],dayList:[{name:"星期一",value:1},{name:"星期二",value:2},{name:"星期三",value:3},{name:"星期四",value:4},{name:"星期五",value:5},{name:"星期六",value:6},{name:"星期天",value:7}],courseEnteringFormPart:"courseContent",dialogImageUrl:"",dialogVisible:!1,courseItem:{sectionList:[]},toAddCourseItem:{sectionList:[]},checkedCourseItem:{},classInfoSwiper:{},classDetailDialogVisible:!1,addCourseDialogVisible:!1,uploadImgTag:{},courseForm:{},courseFormTemplate:{schoolId:"schoolid",area:"",advancePayment:0,courseFee:0,name:"",grades:[],degreeOfDifficulty:"",numberOfStudentsFromPastToNow:0,score:0,introduction:"",coverImg:"",coverImgOnMobile:"",enabled:!1,extraFee:0,extraFeeExplain:"string",lessonBeginTime:"string",lessonEndTime:"string",lessonFee:0,lessonLocation:"",lessonDays:[],maxNumberOfStudents:0,numberOfLessons:0,startDate:"2018-04-08T12:59:38.729Z",imgs:[],description:"",studentIds:[],studentInfos:[],courseChapters:[{sequenceNumber:0,title:"",description:"",courseSections:[]}],courseTeacher:{realName:"",realNameAuthenticationPassed:!1,assistantName:"",introduction:"",honours:"",profilePhoto:"",address:{city:"珠海",detail:"string",district:"string",province:"string"}}},rules:{name:[{required:!0,message:"请输入课程名称",trigger:"blur"}],area:[{required:!0,message:"请选择学段",trigger:"change"}],lessonBeginTime:[{required:!0,message:"请选择课程时间段",trigger:"change"}],lessonLocation:[{required:!0,message:"请选择上课地点",trigger:"change"}],grades:[{type:"array",required:!0,message:"请选择课程年级",trigger:"change"}],imgs:[{type:"array",required:!0,message:"请至少上传一张课程介绍图片",trigger:"change"}],lessonDays:[{type:"array",required:!0,message:"请选择课程上课时间",trigger:"change"}],degreeOfDifficulty:[{required:!0,message:"请选择课程难度",trigger:"change"}],introduction:[{required:!0,message:"请填写封面介绍",trigger:"change"}],description:[{required:!0,message:"请填写课程简介",trigger:"change"}],coverImg:[{required:!0,message:"请上传课程封面",trigger:"change"}],"courseTeacher.realName":[{required:!0,message:"请输入教师姓名",trigger:"blur"}],"courseTeacher.assistantName":[{required:!0,message:"请输入助教姓名",trigger:"blur"}],"courseTeacher.introduction":[{required:!0,message:"请输入教师简介",trigger:"blur"}],"courseTeacher.honours":[{required:!0,message:"请输入教师荣誉简介",trigger:"blur"}],"courseTeacher.profilePhoto":[{required:!0,message:"请上传教师头像",trigger:"change"}],"courseTeacher.address.city":[{required:!0,trigger:"blur"}]}}},props:{courseFormDialogTitle:String,editCourseItem:Object,formModel:String},beforeCreate:function(){},created:function(){},mounted:function(){var e=this;vueBus.$on("importCourseSelected",function(s){e.importCourseInfo(s)}),e.courseForm=Vue.util.extend({},JSON.parse(c()(e.courseFormTemplate)))},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{notifyTR:function(){this.$notify({title:"提示",message:arguments[0],position:"top-right",type:arguments[1]})},showimportCourseDialog:function(){this.stateObj.courseImportDialogVisible=!0},importCourseInfo:function(e){var s=this;i()(e).forEach(function(t){if(s.courseForm.hasOwnProperty(t))if(null===e[t]||void 0===e[t])s.courseForm[t]=e[t];else{var r=Object.prototype.toString.call(e[t]).slice(8,-1);s.courseForm[t]="Object"==r||"Array"==r?JSON.parse(c()(e[t])):e[t]}})},onCourseFormDialogOpen:function(){var e=this;"课程编辑"==e.courseFormDialogTitle?e.courseForm=Vue.util.extend({},JSON.parse(c()(e.editCourseItem))):e.courseForm=Vue.util.extend({},JSON.parse(c()(e.courseFormTemplate)))},getFileList:function(e,s,t){var r=[];return e.forEach(function(e){e&&r.push({url:e,property:s,propertyType:t})}),r},checkCourseInfo:function(){var e=this;e.classDetailDialogVisible=!0,e.checkedCourseItem=arguments[0],e.$nextTick(function(){e.classInfoSwiper=new Swiper(".swiper-container",{pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",clickable:!0}})})},toggleSegmentVisible:function(e){e.segmentVisible=!e.segmentVisible},editCourse:function(){var e=this;arguments[1].stopPropagation(),e.courseForm=Vue.util.extend({},JSON.parse(c()(arguments[0]))),e.addCourseDialogVisible=!0,e.courseDialogTitle="课程编辑",e.courseEnteringFormPart="courseContent"},onAddCourseDialogClose:function(){var e=this;e.$refs.courseForm.resetFields(),e.clearUploadFiles()},onclassDetailDialogOpen:function(){},openAddCourseDialog:function(){var e=this;e.addCourseDialogVisible=!0,e.courseDialogTitle="课程录入",e.courseEnteringFormPart="courseContent",e.courseForm=Vue.util.extend({},JSON.parse(c()(e.courseFormTemplate)))},selectSearchFilter:function(e,s){var t=this;switch(t.searchFilter[e]=s,s){case"小学":t.searchFilter.grade=1;break;case"初中":t.searchFilter.grade=7;break;case"高中":t.searchFilter.grade=10}t.loadCourse()},handleBeforeRemove:function(){},getImgUrl:function(e,s){if("string"==s)return"";var t=[];return e.forEach(function(e){t.push(e.url)}),t},handleRemove:function(e,s){var t=this,r=e.url,o=e.property,a=e.propertyType,i=o.split(".");t.$axios.delete(t.requestUrl.fileDelete,{params:{url:r}}).then(function(e){var r=t.getImgUrl(s,a);switch(i.length){case 1:t.courseForm[i[0]]=r;break;case 2:t.courseForm[i[0]][i[1]]=r;break;case 3:t.courseForm[i[0]][i[1]][i[2]]=r}}).catch(function(e){t.notifyTR("删除图片失败,请检查网络是否连通","error"),console.log(e)})},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},switchEnteringFormPart:function(){this.courseEnteringFormPart=arguments[0]},removeCourseFromLocalList:function(e){var s=this,t=s.courseList.indexOf(e);s.courseList.splice(t,1)},addCourseSection:function(){var e=this;e.courseForm.courseChapters.push(JSON.parse(c()(e.charpterItem)))},removeCourseSection:function(e){var s=this,t=s.courseForm.courseChapters.indexOf(e);s.courseForm.courseChapters.splice(t,1)},addSectionSegment:function(e){var s=this;s.courseForm.courseChapters[e].courseSections.push(JSON.parse(c()(s.segmentItem)))},removeSectionSegment:function(e,s){var t=this,r=t.courseForm.courseChapters[e].courseSections.indexOf(s);t.courseForm.courseChapters[e].courseSections.splice(r,1)},handleCoverSuccessUpload:function(e,s,t){this.courseItem.coverImg=e},clearUploadFiles:function(){var e=this;e.uploadRefNames.forEach(function(s){e.$refs[s].clearFiles()})},imgUploadRequest:function(e,s,t){var r=this,o={headers:{"Content-Type":"multipart/form-data"}};r.$axios.post(s,t,o).then(function(s){switch(e){case"coverImg":r.courseForm.coverImg=s.data;break;case"imgs":r.courseForm.imgs.push(s.data);break;case"profilePhoto":r.courseForm.courseTeacher.profilePhoto=s.data}}).catch(function(e){alert("图片上传失败"),console.log(e)})},getImgFormdata:function(){var e=arguments[0],s=e.file,t=(e.action,new FormData);return t.append("multipartFile",s),t},uploadCover:function(){var e=this,s=e.getImgFormdata(arguments[0]);e.imgUploadRequest("coverImg",arguments[0].action,s)},uploadProfilePic:function(){var e=this,s=e.getImgFormdata(arguments[0]);e.imgUploadRequest("profilePhoto",arguments[0].action,s)},uploadBanners:function(){var e=this,s=e.getImgFormdata(arguments[0]);e.imgUploadRequest("imgs",arguments[0].action,s)},validateForm:function(e){var s=this,t=!1;return s.$refs[e].validate(function(e){t=e}),t},saveAddedCourse:function(e,s){var t=this;t.validateForm("courseForm")?(console.table(t.courseForm),t.$axios[e](s,t.courseForm).then(function(e){t.notifyTR("课程保存成功","success"),"新增课程"==t.courseDialogTitle?t.courseList.push(e.data):t.courseList.forEach(function(s,r){s.id==e.data.id&&t.courseList.splice(r,1,t.courseForm)}),t.addCourseDialogVisible=!1}).catch(function(e){t.notifyTR("课程保存失败,请检查网络是否连通","error"),console.log(e)})):t.$alert("请完整填写课程表单信息","提示",{confirmButtonText:"确定"})}},computed:o()({},t.i(l.mapState)(["stateObj","requestUrl"]),{gradeList:function(){var e=this;return function(s){var t=1,r=6;switch(s){case"小学":t=1,r=6;break;case"初中":t=7,r=9;break;case"高中":t=10,r=12}return e.gradeListOrigin.filter(function(e){return e.value>=t&&e.value<=r})}}}),watch:{courseFormDialogTitle:function(e){var s=this;e&&s.onCourseFormDialogOpen()}},filter:{}}},ZLEe:function(e,s,t){e.exports={default:t("rhsp"),__esModule:!0}},eO0P:function(e,s,t){"use strict";var r=t("4YfN"),o=t.n(r),a=t("3cXf"),i=t.n(a),n=t("HVJf"),c=t("n2+R"),l=t("yQwI");s.a={components:{courseImport:c.a,scCourseForm:l.a},data:function(){return{loading:!1,courseImportVisible:!1,radio:"",scCourseInfoVisible:!1,selectedGrade:"二年级",selectedType:"第三方课程",gradeList:[{name:"一年级",value:1},{name:"二年级",value:2},{name:"三年级",value:3},{name:"四年级",value:4},{name:"五年级",value:5},{name:"六年级",value:6},{name:"七年级",value:7},{name:"八年级",value:8},{name:"九年级",value:9}],classTypes:[{name:"本校课程"},{name:"第三方课程"}],searchFilter:{conditions:[{operator:"EQUALS",property:"grade",value:[4]}],connect:"AND",sort:{orders:[{direction:"ASC",property:"id"}]}},courseList:[],selectedCourseItem:{},editCourseItem:{},courseFormDialogTitle:""}},beforeCreate:function(){},created:function(){},mounted:function(){this.loadCourse()},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{notifyTR:function(){this.$notify({title:"提示",message:arguments[0],position:"top-right",type:arguments[1]})},selecteGrade:function(e){var s=this;s.selectedGrade=e.name,s.setFilter("grade",e.value)},setFilter:function(e,s){var t=this,r=t.searchFilter.conditions.find(function(s){return s.property==e});r&&(r.value=s),t.loadCourse()},selecteType:function(e){this.selectedType=e.name},showCourseImportDialog:function(){this.stateObj.courseImportDialogVisible=!0},setCourseSaleFlag:function(e,s,t){var r=this,o=JSON.parse(i()(e));o.enabled=s,r.$axios.put(r.requestUrl.updateCourse,o).then(function(t){e.enabled=s,r.notifyTR("success",s?"成功上架课程":"成功下架课程"),r.loading=!1}).catch(function(e){r.loading=!1,console.log("loadCourse:"+e)})},loadCourse:function(){var e=this;e.loading=!0,e.$axios.post(e.requestUrl.queryCourse,e.searchFilter).then(function(s){e.courseList=s.data,e.loading=!1}).catch(function(s){e.loading=!1,console.log("loadCourse:"+s)})},removeCourseFromLocalList:function(e){var s=this,t=s.courseList.indexOf(e);s.courseList.splice(t,1)},checkCourseInfo:function(e){var s=this;s.scCourseInfoVisible=!0,s.selectedCourseItem=e},editCourse:function(e,s){var t=this;s.stopPropagation(),t.editCourseItem=Vue.util.extend({},JSON.parse(i()(e))),t.$nextTick(function(){t.courseFormDialogTitle="课程编辑",t.stateObj.scCourseImportDialogVisible=!0})},addCourse:function(e){var s=this;e.stopPropagation(),s.stateObj.scCourseImportDialogVisible=!0,s.courseFormDialogTitle="新增课程"},removeCourse:function(e,s){var t=arguments,r=this;s.stopPropagation(),r.$axios.delete(r.requestUrl.removeCourse,{data:{id:e.id}}).then(function(e){r.notifyTR("成功删除课程","success"),r.removeCourseFromLocalList(t[0])}).catch(function(e){r.notifyTR("删除课程失败,请检查网络是否连通","error"),console.log(e)})}},computed:o()({},t.i(n.mapState)(["stateObj","requestUrl"])),watch:{searchFilter:{handler:function(){this.loadCourse()},deep:!0}},filter:{}}},j5kO:function(e,s,t){"use strict";var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"view-container"},[t("div",{staticClass:"h-50 f-w-b f-s-20"},[e._m(0),e._v(" "),t("div",{staticClass:"f-r mr-20 f-s-26"},[t("span",{on:{click:function(s){e.addCourse(s)}}},[t("i",{staticClass:"fa fa-plus-circle"})])])]),e._v(" "),t("div",{staticClass:"h-50 p-l-20"},e._l(e.gradeList,function(s){return t("span",{staticClass:"in-b mr-20 inline-filter-item",class:{"selected-blue":e.selectedGrade==s.name},on:{click:function(t){e.selecteGrade(s)}}},[e._v(e._s(s.name))])})),e._v(" "),t("div",{staticClass:"h-50 p-l-20"},e._l(e.classTypes,function(s,r){return t("span",{staticClass:"in-b mr-20 inline-filter-item",class:{"selected-blue":e.selectedType==s.name},on:{click:function(t){e.selecteType(s)}}},[e._v(e._s(s.name))])})),e._v(" "),e._m(1),e._v(" "),t("div",{staticClass:"scCourse-content-ct"},e._l(e.courseList,function(s){return t("div",{staticClass:"class-item class-item-home",on:{click:function(t){e.checkCourseInfo(s)}}},[t("div",{staticClass:"class-cover",style:{backgroundImage:"url("+s.coverImg+")"}},[t("div",{staticClass:"course-handler-ct"},[t("div",[t("span",{staticClass:"course-handler-btn",on:{click:function(t){e.editCourse(s,t)}}},[t("i",{staticClass:"fa fa-edit"})]),e._v(" "),t("span",{staticClass:"course-handler-btn",on:{click:function(t){e.removeCourse(s,t)}}},[t("i",{staticClass:"fa fa-trash"})])])])]),e._v(" "),t("div",{staticClass:"p-h-5"},[t("div",{staticClass:"class-name"},[e._v(e._s(s.name))]),e._v(" "),t("div",{staticClass:"class-property"},[t("div",[t("span",{staticClass:"pro-level"},[e._v(e._s(s.degreeOfDifficulty))]),e._v(" "),t("span",{staticClass:"ml-10"},[e._v("学时："+e._s(s.numberOfLessons))]),e._v(" "),t("span",{staticClass:"ml-10"},[e._v("学位："+e._s(s.numberOfLessons))])]),e._v(" "),t("div",[t("span",{},[e._v(e._s(e._f("dayTransform")(s.lessonDays[0])))]),e._v(" "),t("span",{staticClass:"ml-10"},[e._v("16:00-17:00")])]),e._v(" "),t("div",[t("span",[e._v("授课教师："+e._s(s.courseTeacher.realName))])])]),e._v(" "),t("div",{staticClass:"h-40 f-s-20"},[t("div",{staticClass:"f-l f-w-b"},[t("span",{staticClass:"scCourse-course-price"},[e._v("¥"+e._s(s.courseFee))])]),e._v(" "),t("div",{staticClass:"f-r"},[s.enabled?e._e():t("span",{staticClass:"scCourse-course-state-handle-btn",on:{click:function(t){e.setCourseSaleFlag(s,!0,t)}}},[e._v("上架")]),e._v(" "),s.enabled?t("span",{staticClass:"scCourse-course-state-handle-btn bg-green",on:{click:function(t){e.setCourseSaleFlag(s,!1,t)}}},[e._v("下架")]):e._e()])])])])})),e._v(" "),t("div",[t("course-import",{attrs:{courseImportVisible:e.stateObj.courseImportDialogVisible},on:{"update:courseImportVisible":function(s){e.$set(e.stateObj,"courseImportDialogVisible",s)}}}),e._v(" "),t("sc-course-form",{attrs:{editCourseItem:e.editCourseItem,courseFormDialogTitle:e.courseFormDialogTitle},on:{"update:editCourseItem":function(s){e.editCourseItem=s},"update:courseFormDialogTitle":function(s){e.courseFormDialogTitle=s}}})],1)])},o=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"f-l ml-20"},[t("span",[e._v("本学期课程")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"h-50 f-w-b f-s-20"},[t("div",{staticClass:"f-l ml-20"},[t("span",{staticClass:"scCourse-date-des"},[e._v("2018年9月3日——2018年9月13日")])]),e._v(" "),t("div",{staticClass:"f-r mr-20"},[t("span",[t("i",{staticClass:"fa fa-ellipsis-h"})])])])}],a={render:r,staticRenderFns:o};s.a=a},"n2+R":function(e,s,t){"use strict";var r=t("3u2N"),o=t("v8YE"),a=t("Z0/y"),i=a(r.a,o.a,!1,null,null,null);s.a=i.exports},rhsp:function(e,s,t){t("CLwS"),e.exports=t("UusJ").Object.keys},v8YE:function(e,s,t){"use strict";var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{},[e.stateObj.courseImportDialogVisible?t("el-dialog",{staticClass:"eca-dialog-header",attrs:{title:"课程导入",visible:e.stateObj.courseImportDialogVisible,width:"1025px"},on:{close:function(e){},"update:visible":function(s){e.$set(e.stateObj,"courseImportDialogVisible",s)}}},[t("div",{staticClass:"dialog-body dialog-body-750 f-clear"},[t("div",{},[t("div",{staticClass:"h-50 p-l-20"},e._l(e.gradeList,function(s){return t("span",{staticClass:"in-b mr-20 inline-filter-item",class:{"selected-blue":e.selectedGrade==s.name},on:{click:function(t){e.selecteGrade(s)}}},[e._v(e._s(s.name))])})),e._v(" "),t("div",{staticClass:"h-50 p-l-20"},e._l(e.classTypes,function(s,r){return t("span",{staticClass:"in-b mr-20 inline-filter-item",class:{"selected-blue":e.selectedType==s.name},on:{click:function(t){e.selecteType(s)}}},[e._v(e._s(s.name))])}))]),e._v(" "),t("div",{staticClass:"import-course-list-ct p-h-20"},e._l(e.courseList,function(s){return t("div",{staticClass:"class-item class-item-home"},[t("div",{staticClass:"class-cover",style:{backgroundImage:"url("+s.coverImg+")"}},[t("div",{staticClass:"course-handler-ct"},[t("div"),e._v(" "),t("div")]),e._v(" "),t("span",{staticClass:"course-selected-flag",class:{"selected-green":e.selectedCourse.id==s.id},on:{click:function(t){e.selectSingleCourse(s,t)}}},[t("i",{staticClass:"fa fa-check-circle"})])]),e._v(" "),t("div",{staticClass:"class-name"},[e._v(e._s(s.name))]),e._v(" "),t("div",{staticClass:"class-property"},[t("span",{staticClass:"pro-level"},[e._v(e._s(s.degreeOfDifficulty))]),e._v(" "),t("span",{staticClass:"pro-member-count"},[t("i",{staticClass:"fa fa-user"}),e._v(e._s(s.numberOfStudentsFromPastToNow))])]),e._v(" "),t("div",{staticClass:"member-des home-course-des"},[e._v(e._s(s.introduction))])])}))]),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(s){e.stateObj.courseImportDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"success"},on:{click:function(s){e.importCourse()}}},[e._v("确定")])],1)]):e._e()],1)},o=[],a={render:r,staticRenderFns:o};s.a=a},yQwI:function(e,s,t){"use strict";var r=t("QF8L"),o=t("N0+X"),a=t("Z0/y"),i=a(r.a,o.a,!1,null,null,null);s.a=i.exports}});
//# sourceMappingURL=2.39192e0b2a07b465d6a5.js.map