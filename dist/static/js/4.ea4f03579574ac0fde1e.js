webpackJsonp([4],{"+EnS":function(e,t,s){"use strict";var a=s("3cXf"),r=s.n(a);s("HVJf");t.a={components:{},data:function(){return{loading:!1,radio:"",selectedGrade:"二年级",selectedType:"第三方课程",gradeList:[{name:"一年级"},{name:"二年级"},{name:"三年级"},{name:"四年级"},{name:"五年级"},{name:"六年级"},{name:"七年级"},{name:"八年级"},{name:"九年级"}],classTypes:[{name:"本校课程"},{name:"第三方课程"}],searchFilter:{area:"小学",grade:1},courseList:[]}},beforeCreate:function(){},created:function(){},mounted:function(){this.loadCourse()},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{selecteGrade:function(e){this.selectedGrade=e.name},selecteType:function(e){this.selectedType=e.name},notifyTR:function(){this.$notify({title:"提示",message:arguments[0],position:"top-right",type:arguments[1]})},getFileList:function(e,t,s){var a=[];return e.forEach(function(e){e&&a.push({url:e,property:t,propertyType:s})}),a},checkCourseInfo:function(){var e=this;e.classDetailDialogVisible=!0,e.checkedCourseItem=arguments[0],e.$nextTick(function(){e.classInfoSwiper=new Swiper(".swiper-container",{pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",clickable:!0}})})},toggleSegmentVisible:function(e){e.segmentVisible=!e.segmentVisible},editCourse:function(){var e=this;arguments[1].stopPropagation(),e.courseForm=Vue.util.extend({},JSON.parse(r()(arguments[0]))),e.addCourseDialogVisible=!0,e.courseDialogTitle="课程编辑",e.courseEnteringFormPart="courseContent"},onAddCourseDialogClose:function(){var e=this;e.$refs.courseForm.resetFields(),e.clearUploadFiles()},onclassDetailDialogOpen:function(){},openAddCourseDialog:function(){var e=this;e.addCourseDialogVisible=!0,e.courseDialogTitle="课程录入",e.courseEnteringFormPart="courseContent",e.courseForm=Vue.util.extend({},JSON.parse(r()(e.courseFormTemplate)))},selectSearchFilter:function(e,t){var s=this;switch(s.searchFilter[e]=t,t){case"小学":s.searchFilter.grade=1;break;case"初中":s.searchFilter.grade=7;break;case"高中":s.searchFilter.grade=10}s.loadCourse()},handleBeforeRemove:function(){},getImgUrl:function(e,t){if("string"==t)return"";var s=[];return e.forEach(function(e){s.push(e.url)}),s},handleRemove:function(e,t){var s=this,a=e.url,r=e.property,i=e.propertyType,o=r.split(".");s.$axios.delete("/web/course/file/command/remove",{params:{url:a}}).then(function(e){var a=s.getImgUrl(t,i);switch(o.length){case 1:s.courseForm[o[0]]=a;break;case 2:s.courseForm[o[0]][o[1]]=a;break;case 3:s.courseForm[o[0]][o[1]][o[2]]=a}}).catch(function(e){s.notifyTR("删除图片失败,请检查网络是否连通","error"),console.log(e)})},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},switchEnteringFormPart:function(){this.courseEnteringFormPart=arguments[0]},removeCourseFromLocalList:function(e){var t=this,s=t.courseList.indexOf(e);t.courseList.splice(s,1)},addCourseSection:function(){var e=this;e.courseForm.courseChapters.push(JSON.parse(r()(e.charpterItem)))},removeCourseSection:function(e){var t=this,s=t.courseForm.courseChapters.indexOf(e);t.courseForm.courseChapters.splice(s,1)},addSectionSegment:function(e){var t=this;t.courseForm.courseChapters[e].courseSections.push(JSON.parse(r()(t.segmentItem)))},removeSectionSegment:function(e,t){var s=this,a=s.courseForm.courseChapters[e].courseSections.indexOf(t);s.courseForm.courseChapters[e].courseSections.splice(a,1)},handleCoverSuccessUpload:function(e,t,s){this.courseItem.coverImg=e},clearUploadFiles:function(){var e=this;e.uploadRefNames.forEach(function(t){e.$refs[t].clearFiles()})},imgUploadRequest:function(e,t,s){var a=this,r={headers:{"Content-Type":"multipart/form-data"}};a.$axios.post(t,s,r).then(function(t){switch(e){case"coverImg":a.courseForm.coverImg=t.data;break;case"imgs":a.courseForm.imgs.push(t.data);break;case"profilePhoto":a.courseForm.courseTeacher.profilePhoto=t.data}}).catch(function(e){alert("图片上传失败"),console.log(e)})},getImgFormdata:function(){var e=arguments[0],t=e.file,s=(e.action,new FormData);return s.append("multipartFile",t),s},uploadCover:function(){var e=this,t=e.getImgFormdata(arguments[0]);e.imgUploadRequest("coverImg",arguments[0].action,t)},uploadProfilePic:function(){var e=this,t=e.getImgFormdata(arguments[0]);e.imgUploadRequest("profilePhoto",arguments[0].action,t)},uploadBanners:function(){var e=this,t=e.getImgFormdata(arguments[0]);e.imgUploadRequest("imgs",arguments[0].action,t)},validateForm:function(e){var t=this,s=!1;return t.$refs[e].validate(function(e){s=e}),s},saveAddedCourse:function(e,t){var s=this;s.validateForm("courseForm")?s.$axios[e](t,s.courseForm).then(function(e){s.notifyTR("课程保存成功","success"),"课程录入"==s.courseDialogTitle?s.courseList.push(e.data):s.courseList.forEach(function(t,a){t.id==e.data.id&&s.courseList.splice(a,1,s.courseForm)}),s.addCourseDialogVisible=!1}).catch(function(e){s.notifyTR("课程保存失败,请检查网络是否连通","error"),console.log(e)}):s.$alert("请完整填写课程表单信息","提示",{confirmButtonText:"确定"})},deleteCourse:function(){var e=arguments,t=this,s=arguments[0].id;arguments[1].stopPropagation(),t.$axios.delete("/web/course/course/command/remove?id="+s).then(function(s){t.notifyTR("成功删除课程","success"),t.removeCourseFromLocalList(e[0])}).catch(function(e){t.notifyTR("删除课程失败,请检查网络是否连通","error"),console.log(e)})},loadCourse:function(){var e=this;e.loading=!0,e.$axios.post("/web/course/course/query/list",e.searchFilter).then(function(t){e.courseList=t.data,e.loading=!1}).catch(function(t){e.loading=!1,console.log("loadCourse:"+t)})}},computed:{},watch:{},filter:{}}},"3cXf":function(e,t,s){e.exports={default:s("4rP4"),__esModule:!0}},"4rP4":function(e,t,s){var a=s("UusJ"),r=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},"Ea+E":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"view-container"},[e._m(0),e._v(" "),s("div",{staticClass:"h-50 p-l-20"},e._l(e.gradeList,function(t){return s("span",{staticClass:"in-b mr-20 inline-filter-item",class:{"selected-blue":e.selectedGrade==t.name},on:{click:function(s){e.selecteGrade(t)}}},[e._v(e._s(t.name))])})),e._v(" "),s("div",{staticClass:"h-50 p-l-20"},e._l(e.classTypes,function(t,a){return s("span",{staticClass:"in-b mr-20 inline-filter-item",class:{"selected-blue":e.selectedType==t.name},on:{click:function(s){e.selecteType(t)}}},[e._v(e._s(t.name))])})),e._v(" "),e._m(1),e._v(" "),s("div",{staticClass:"scCourse-content-ct"},e._l(e.courseList,function(t){return s("div",{staticClass:"class-item class-item-home",on:{click:function(s){e.checkCourseInfo(t)}}},[s("div",{staticClass:"class-cover",style:{backgroundImage:"url("+t.coverImg+")"}},[e._m(2,!0)]),e._v(" "),s("div",{staticClass:"p-h-5"},[s("div",{staticClass:"class-name"},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"class-property"},[s("div",[s("span",{staticClass:"pro-level"},[e._v(e._s(t.degreeOfDifficulty))]),e._v(" "),s("span",{staticClass:"pro-member-count"},[s("i",{staticClass:"fa fa-user"}),e._v("\n          "+e._s(t.numberOfStudentsFromPastToNow)+"\n          ")]),e._v(" "),s("span",{staticClass:"ml-10"},[e._v("周一 16:00-17:00")])]),e._v(" "),e._m(3,!0)]),e._v(" "),e._m(4,!0)])])}))])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"h-50 f-w-b f-s-20"},[s("div",{staticClass:"f-l ml-20"},[s("span",[e._v("本学期数据")])]),e._v(" "),s("div",{staticClass:"f-r mr-20 f-s-26"},[s("span",[s("i",{staticClass:"fa fa-plus-circle"})])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"h-50 f-w-b f-s-20"},[s("div",{staticClass:"f-l ml-20"},[s("span",{staticClass:"scCourse-date-des"},[e._v("2018年9月3日——2018年9月13日")])]),e._v(" "),s("div",{staticClass:"f-r mr-20"},[s("span",[s("i",{staticClass:"fa fa-ellipsis-h"})])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"course-handler-ct"},[s("div",[s("span",{staticClass:"course-handler-btn"},[s("i",{staticClass:"fa fa-edit"})]),e._v(" "),s("span",{staticClass:"course-handler-btn"},[s("i",{staticClass:"fa fa-trash"})])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",[e._v("授课教师：张轩")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"h-40 f-s-20"},[s("div",{staticClass:"f-l f-w-b"},[s("span",{staticClass:"scCourse-course-price"},[e._v("¥500")])]),e._v(" "),s("div",{staticClass:"f-r"},[s("span",{staticClass:"scCourse-course-state-handle-btn"},[e._v("下架")])])])}],i={render:a,staticRenderFns:r};t.a=i},PvtR:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("+EnS"),r=s("Ea+E"),i=s("Z0/y"),o=i(a.a,r.a,!1,null,null,null);t.default=o.exports}});
//# sourceMappingURL=4.ea4f03579574ac0fde1e.js.map